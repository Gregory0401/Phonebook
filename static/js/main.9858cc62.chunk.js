(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[3],{112:function(e,t,n){},113:function(e,t,n){"use strict";n.r(t);var r,c=n(0),a=n.n(c),s=n(26),o=n.n(s),i=n(18),u=n(57),b=n(12),l=n(9),j=n(21),d=n(59),f=n.n(d),g=n(47),h=n(5),O=n(8),p=O.a.registerRequest,v=O.a.registerSuccess,x=O.a.registerError,m=O.a.logInRequest,k=O.a.logInSuccess,L=O.a.logInError,C=O.a.logoutRequest,y=O.a.logoutSuccess,_=O.a.logoutError,U=O.a.getCurrentUserRequest,w=O.a.getCurrentUserSuccess,R=O.a.getCurrentUserError,S=Object(l.d)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isLoading:!1,error:null,isFetchingCurrentUser:!1},extraReducers:(r={},Object(h.a)(r,p,(function(e){e.isLoading=!0})),Object(h.a)(r,v,(function(e,t){var n=t.payload;e.user=n.user,e.token=n.token,e.isLoggedIn=!0,e.isLoading=!1})),Object(h.a)(r,x,(function(e,t){var n=t.payload;e.error=n})),Object(h.a)(r,m,(function(e){e.isLoading=!0})),Object(h.a)(r,k,(function(e,t){var n=t.payload;e.user=n.user,e.token=n.token,e.isLoggedIn=!0,e.isLoading=!1})),Object(h.a)(r,L,(function(e,t){var n=t.payload;e.error=n})),Object(h.a)(r,C,(function(e){e.isLoading=!0})),Object(h.a)(r,y,(function(e){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1,e.isLoading=!1,e.error=null})),Object(h.a)(r,_,(function(e,t){var n=t.payload;e.error=n})),Object(h.a)(r,U,(function(e){e.isLoading=!0,e.isFetchingCurrentUser=!0})),Object(h.a)(r,w,(function(e,t){var n=t.payload;e.user=n,e.isLoggedIn=!0,e.isLoading=!1,e.isFetchingCurrentUser=!1})),Object(h.a)(r,R,(function(e){e.isLoading=!1,e.isFetchingCurrentUser=!1})),r)}).reducer,I={key:"auth",storage:f.a,whitelist:["token"]},N=Object(l.a)({reducer:{auth:Object(j.g)(I,S),contacts:g.b},middleware:function(e){return e({serializableCheck:{ignoredActions:[j.a,j.f,j.b,j.c,j.d,j.e]}})},devTools:!1}),E=Object(j.h)(N),q=n(46),F=n.n(q),T=(n(108),n(23)),z=(n(109),n(16)),A=n(33),B=n.n(A),W=n(3),M=function(){var e=Object(b.c)(z.c);return Object(W.jsxs)("nav",{children:[Object(W.jsx)(i.b,{to:"/",exact:!0,className:B.a.link,activeClassName:B.a.activeLink,children:"Home"}),e&&Object(W.jsx)(i.b,{to:"/contacts",exact:!0,className:B.a.link,activeClassName:B.a.activeLink,children:"Contacts"})]})},V=n(34),H=n.n(V);function Y(){return Object(W.jsxs)("div",{children:[Object(W.jsx)(i.b,{to:"/register",exact:!0,className:H.a.link,activeClassName:H.a.activeLink,children:"Register"}),Object(W.jsx)(i.b,{to:"/login",exact:!0,className:H.a.link,activeClassName:H.a.activeLink,children:"Login"})]})}var J=n(37),P=n.p+"static/media/avatar.c7554b2c.png",Z=n(42),D=n.n(Z);function G(){var e=Object(b.b)(),t=Object(b.c)(z.d),n=P;return Object(W.jsxs)("div",{className:D.a.container,children:[Object(W.jsx)("img",{src:n,alt:"avatar",width:"32",className:D.a.avatar}),Object(W.jsxs)("span",{className:D.a.name,children:["Welcome, ",t]}),Object(W.jsx)("button",{type:"button",onClick:function(){e(Object(J.c)()),T.b.info("You logged out of your account !",{position:"top-center",autoClose:2500})},children:"Log Out"})]})}var K=n(60),Q=n.n(K);function X(){var e=Object(b.c)(z.c);return Object(W.jsxs)("header",{className:Q.a.header,children:[Object(W.jsx)(M,{}),e?Object(W.jsx)(G,{}):Object(W.jsx)(Y,{})]})}var $=n(61),ee=n.n($),te=function(e){var t=e.children;return Object(W.jsx)("div",{className:ee.a.container,children:t})},ne=n(41),re=n(2),ce=["children","redirectTo"];function ae(e){var t=e.children,n=e.redirectTo,r=void 0===n?"/":n;Object(ne.a)(e,ce);return Object(b.c)(z.c)?t:Object(W.jsx)(re.a,{to:r})}var se=["children","restricted","redirectTo"];function oe(e){var t=e.children,n=e.restricted,r=void 0!==n&&n,c=e.redirectTo,a=void 0===c?"/":c;Object(ne.a)(e,se);return Object(b.c)(z.c)&&r?Object(W.jsx)(re.a,{to:a}):t}var ie=Object(c.lazy)((function(){return n.e(1).then(n.bind(null,121))})),ue=Object(c.lazy)((function(){return n.e(2).then(n.bind(null,122))})),be=Object(c.lazy)((function(){return n.e(4).then(n.bind(null,123))})),le=Object(c.lazy)((function(){return n.e(0).then(n.bind(null,120))}));function je(){var e=Object(b.b)(),t=Object(b.c)(z.b);return Object(c.useEffect)((function(){e(Object(J.a)())}),[e]),Object(W.jsx)(W.Fragment,{children:t?Object(W.jsx)(F.a,{className:"Spinner",type:"Circles",color:"#1b39e2",height:300,width:300}):Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(X,{}),Object(W.jsx)(T.a,{}),Object(W.jsx)(te,{children:Object(W.jsx)(c.Suspense,{fallback:Object(W.jsx)(F.a,{className:"Spinner",type:"Circles",color:"#1b39e2",height:300,width:300}),children:Object(W.jsxs)(re.d,{children:[Object(W.jsx)(re.b,{path:"/",exact:!0,element:Object(W.jsx)(oe,{children:Object(W.jsx)(ie,{})})}),Object(W.jsx)(re.b,{exact:!0,path:"/register",element:Object(W.jsx)(oe,{redirectTo:"/contacts",restricted:!0,children:Object(W.jsx)(be,{})})}),Object(W.jsx)(re.b,{exact:!0,path:"/login",element:Object(W.jsx)(oe,{redirectTo:"/contacts",restricted:!0,children:Object(W.jsx)(ue,{})})}),Object(W.jsx)(re.b,{path:"/contacts",element:Object(W.jsx)(ae,{redirectTo:"/login",children:Object(W.jsx)(le,{})})})]})})})]})})}n(111),n(112);o.a.render(Object(W.jsx)(a.a.StrictMode,{children:Object(W.jsx)(b.a,{store:N,children:Object(W.jsx)(u.a,{loading:Object(W.jsx)("h2",{children:"Wait..."}),persistor:E,children:Object(W.jsx)(i.a,{children:Object(W.jsx)(je,{})})})})}),document.getElementById("root"))},16:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var r=function(e){return e.auth.user.name},c=function(e){return e.auth.isLoggedIn},a=function(e){return e.auth.isFetchingCurrentUser},s=function(e){return e.auth.error}},19:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return b}));var r=n(4),c=n(7),a=n(9),s=n(15),o=n.n(s);o.a.defaults.baseURL="https://connections-api.herokuapp.com";var i=Object(a.c)("phonebook/fetchContacts",function(){var e=Object(c.a)(Object(r.a)().mark((function e(t,n){var c,a,s;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.rejectWithValue,e.prev=1,e.next=4,o.a.get("/contacts");case 4:return a=e.sent,s=a.data,e.abrupt("return",s);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",c(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),u=Object(a.c)("phonebook/addContact",function(){var e=Object(c.a)(Object(r.a)().mark((function e(t,n){var c,a,s;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.rejectWithValue,e.prev=1,e.next=4,o.a.post("/contacts",t);case 4:return a=e.sent,s=a.data,e.abrupt("return",s);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",c(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),b=Object(a.c)("phonebook/deleteContact",function(){var e=Object(c.a)(Object(r.a)().mark((function e(t,n){var c,a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.rejectWithValue,e.prev=1,e.next=4,o.a.delete("/contacts/".concat(t));case 4:if(a=e.sent,200!==a.status){e.next=10;break}return e.abrupt("return",t);case 10:throw new Error({message:"error"});case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",c(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n){return e.apply(this,arguments)}}())},33:function(e,t,n){e.exports={link:"Navigation_link__YyxB8",activeLink:"Navigation_activeLink__OgrPt"}},34:function(e,t,n){e.exports={link:"AuthNav_link__HsFlU",activeLink:"AuthNav_activeLink__3HbVg"}},37:function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return f}));var r=n(4),c=n(7),a=n(15),s=n.n(a),o=n(23),i=n(8);s.a.defaults.baseURL="https://connections-api.herokuapp.com";var u=function(e){s.a.defaults.headers.common.Authorization="Bearer ".concat(e)},b=function(){s.a.defaults.headers.common.Authorization=""},l=function(e){return function(){var t=Object(c.a)(Object(r.a)().mark((function t(n){var c,a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(i.a.registerRequest()),t.prev=1,t.next=4,s.a.post("/users/signup",e);case 4:c=t.sent,a=c.data,u(a.token),n(i.a.registerSuccess(a)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),n(i.a.registerError(t.t0.message)),o.b.error(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(c.a)(Object(r.a)().mark((function t(n){var c,a;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(i.a.logInRequest()),t.prev=1,t.next=4,s.a.post("/users/login",e);case 4:c=t.sent,a=c.data,u(a.token),n(i.a.logInSuccess(a)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),n(i.a.logInError(t.t0.message)),o.b.error(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},d=function(e){return function(){var e=Object(c.a)(Object(r.a)().mark((function e(t){return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(i.a.logoutRequest()),e.prev=1,e.next=4,s.a.post("/users/logout");case 4:b(),t(i.a.logoutSuccess()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(i.a.logoutError(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},f=function(){return function(){var e=Object(c.a)(Object(r.a)().mark((function e(t,n){var c,a,o,b;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n(),a=c.auth.token){e.next=3;break}return e.abrupt("return");case 3:return u(a),t(i.a.getCurrentUserRequest()),e.prev=5,e.next=8,s.a.get("/users/current");case 8:o=e.sent,b=o.data,t(i.a.getCurrentUserSuccess(b)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),t(i.a.getCurrentUserError(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}()}},42:function(e,t,n){e.exports={container:"UserMenu_container__f3UoN",avatar:"UserMenu_avatar__3fZxw",name:"UserMenu_name__3AUlF"}},47:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r,c=n(5),a=n(9),s=n(19),o=Object(a.d)({name:"phoneBook",initialState:{contacts:[],isLoading:!1,filter:""},reducers:{changeFilter:function(e,t){e.filter=t.payload}},extraReducers:(r={},Object(c.a)(r,s.c.fulfilled,(function(e,t){var n=t.payload;e.contacts=n,e.isLoading=!1})),Object(c.a)(r,s.c.pending,(function(e){e.isLoading=!0})),Object(c.a)(r,s.c.rejected,(function(e){e.isLoading=!1})),Object(c.a)(r,s.a.pending,(function(e){e.isLoading=!0})),Object(c.a)(r,s.a.fulfilled,(function(e,t){var n=t.payload;e.contacts.push(n),e.isLoading=!1})),Object(c.a)(r,s.a.rejected,(function(e){e.isLoading=!1})),Object(c.a)(r,s.b.pending,(function(e){e.isLoading=!0})),Object(c.a)(r,s.b.fulfilled,(function(e,t){var n=t.payload;e.contacts=e.contacts.filter((function(e){return e.id!==n})),e.isLoading=!1})),Object(c.a)(r,s.b.rejected,(function(e){e.isLoading=!1})),r)});t.b=o.reducer;var i=o.actions.changeFilter},60:function(e,t,n){e.exports={header:"AppBar_header__1Yk8v"}},61:function(e,t,n){e.exports={container:"Container_container__3RIox"}},8:function(e,t,n){"use strict";var r=n(9),c={registerRequest:Object(r.b)("auth/registerRequest"),registerSuccess:Object(r.b)("auth/registerSuccess"),registerError:Object(r.b)("auth/registerError"),logInRequest:Object(r.b)("auth/logInRequest"),logInSuccess:Object(r.b)("auth/logInSuccess"),logInError:Object(r.b)("auth/logInError"),logoutRequest:Object(r.b)("auth/logoutRequest"),logoutSuccess:Object(r.b)("auth/logoutSuccess"),logoutError:Object(r.b)("auth/logoutError"),getCurrentUserRequest:Object(r.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(r.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(r.b)("auth/getCurrentUserError")};t.a=c}},[[113,5,6]]]);
//# sourceMappingURL=main.9858cc62.chunk.js.map