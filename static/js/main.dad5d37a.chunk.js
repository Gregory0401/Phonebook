(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[3],{112:function(e,t,n){},113:function(e,t,n){"use strict";n.r(t);var r,c=n(0),a=n.n(c),s=n(24),o=n.n(s),i=n(20),u=n(51),l=n(11),b=n(8),d=n(22),j=n(53),f=n.n(j),g=n(42),h=n(3),p=n(6),O=p.a.registerRequest,v=p.a.registerSuccess,x=p.a.registerError,m=p.a.logInRequest,k=p.a.logInSuccess,L=p.a.logInError,C=p.a.logoutRequest,y=p.a.logoutSuccess,_=p.a.logoutError,U=p.a.getCurrentUserRequest,w=p.a.getCurrentUserSuccess,R=p.a.getCurrentUserError,S=Object(b.d)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isLoading:!1,error:null,isFetchingCurrentUser:!1},extraReducers:(r={},Object(h.a)(r,O,(function(e){e.isLoading=!0})),Object(h.a)(r,v,(function(e,t){var n=t.payload;e.user=n.user,e.token=n.token,e.isLoggedIn=!0,e.isLoading=!1})),Object(h.a)(r,x,(function(e,t){var n=t.payload;e.error=n})),Object(h.a)(r,m,(function(e){e.isLoading=!0})),Object(h.a)(r,k,(function(e,t){var n=t.payload;e.user=n.user,e.token=n.token,e.isLoggedIn=!0,e.isLoading=!1})),Object(h.a)(r,L,(function(e,t){var n=t.payload;e.error=n})),Object(h.a)(r,C,(function(e){e.isLoading=!0})),Object(h.a)(r,y,(function(e){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1,e.isLoading=!1,e.error=null})),Object(h.a)(r,_,(function(e,t){var n=t.payload;e.error=n})),Object(h.a)(r,U,(function(e){e.isLoading=!0,e.isFetchingCurrentUser=!0})),Object(h.a)(r,w,(function(e,t){var n=t.payload;e.user=n,e.isLoggedIn=!0,e.isLoading=!1,e.isFetchingCurrentUser=!1})),Object(h.a)(r,R,(function(e){e.isLoading=!1,e.isFetchingCurrentUser=!1})),r)}).reducer,I={key:"auth",storage:f.a,whitelist:["token"]},N=Object(b.a)({reducer:{auth:Object(d.g)(I,S),contacts:g.b},middleware:function(e){return e({serializableCheck:{ignoredActions:[d.a,d.f,d.b,d.c,d.d,d.e]}})},devTools:!1}),E=Object(d.h)(N),q=n(9),F=n(39),T=n.n(F),z=(n(104),n(23)),A=(n(105),n(18)),B=n(29),W=n.n(B),M=n(1),V=function(){var e=Object(l.c)(A.c);return Object(M.jsxs)("nav",{children:[Object(M.jsx)(i.b,{to:"/",exact:!0,className:W.a.link,activeClassName:W.a.activeLink,children:"Home"}),e&&Object(M.jsx)(i.b,{to:"/contacts",exact:!0,className:W.a.link,activeClassName:W.a.activeLink,children:"Contacts"})]})},H=n(30),Y=n.n(H);function J(){return Object(M.jsxs)("div",{children:[Object(M.jsx)(i.b,{to:"/register",exact:!0,className:Y.a.link,activeClassName:Y.a.activeLink,children:"Register"}),Object(M.jsx)(i.b,{to:"/login",exact:!0,className:Y.a.link,activeClassName:Y.a.activeLink,children:"Login"})]})}var P=n(33),Z=n.p+"static/media/avatar.c7554b2c.png",D=n(36),G=n.n(D);function K(){var e=Object(l.b)(),t=Object(l.c)(A.d),n=Z;return Object(M.jsxs)("div",{className:G.a.container,children:[Object(M.jsx)("img",{src:n,alt:"avatar",width:"32",className:G.a.avatar}),Object(M.jsxs)("span",{className:G.a.name,children:["Welcome, ",t]}),Object(M.jsx)("button",{type:"button",onClick:function(){e(Object(P.c)()),z.b.info("You logged out of your account !",{position:"top-center",autoClose:2500})},children:"Log Out"})]})}var Q=n(54),X=n.n(Q);function $(){var e=Object(l.c)(A.c);return Object(M.jsxs)("header",{className:X.a.header,children:[Object(M.jsx)(V,{}),e?Object(M.jsx)(K,{}):Object(M.jsx)(J,{})]})}var ee=n(55),te=n.n(ee),ne=function(e){var t=e.children;return Object(M.jsx)("div",{className:te.a.container,children:t})},re=n(26),ce=n(35),ae=n(38),se=["children","redirectTo"];function oe(e){var t=e.children,n=e.redirectTo,r=void 0===n?"/":n,c=Object(ce.a)(e,se),a=Object(l.c)(A.c);return Object(M.jsx)(ae.b,Object(re.a)(Object(re.a)({},c),{},{children:a?t:Object(M.jsx)(ae.a,{to:r})}))}var ie=["children","restricted","redirectTo"];function ue(e){var t=e.children,n=e.restricted,r=void 0!==n&&n,c=e.redirectTo,a=void 0===c?"/":c,s=Object(ce.a)(e,ie),o=Object(l.c)(A.c)&&r;return Object(M.jsx)(q.b,Object(re.a)(Object(re.a)({},s),{},{children:o?Object(M.jsx)(q.a,{to:a}):t}))}var le=Object(c.lazy)((function(){return n.e(1).then(n.bind(null,121))})),be=Object(c.lazy)((function(){return n.e(2).then(n.bind(null,122))})),de=Object(c.lazy)((function(){return n.e(4).then(n.bind(null,123))})),je=Object(c.lazy)((function(){return n.e(0).then(n.bind(null,120))}));function fe(){var e=Object(l.b)(),t=Object(l.c)(A.b);return Object(c.useEffect)((function(){e(Object(P.a)())}),[e]),Object(M.jsx)(M.Fragment,{children:t?Object(M.jsx)(T.a,{className:"Spinner",type:"Circles",color:"#1b39e2",height:300,width:300}):Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)($,{}),Object(M.jsx)(z.a,{}),Object(M.jsx)(ne,{children:Object(M.jsx)(c.Suspense,{fallback:Object(M.jsx)(T.a,{className:"Spinner",type:"Circles",color:"#1b39e2",height:300,width:300}),children:Object(M.jsxs)(q.d,{children:[Object(M.jsx)(ue,{exact:!0,path:"/",children:Object(M.jsx)(le,{})}),Object(M.jsx)(ue,{exact:!0,path:"/register",redirectTo:"/contacts",restricted:!0,children:Object(M.jsx)(de,{})}),Object(M.jsx)(ue,{exact:!0,path:"/login",redirectTo:"/contacts",restricted:!0,children:Object(M.jsx)(be,{})}),Object(M.jsx)(oe,{path:"/contacts",redirectTo:"/login",children:Object(M.jsx)(je,{})})]})})})]})})}n(111),n(112);o.a.render(Object(M.jsx)(a.a.StrictMode,{children:Object(M.jsx)(l.a,{store:N,children:Object(M.jsx)(u.a,{loading:Object(M.jsx)("h2",{children:"Wait..."}),persistor:E,children:Object(M.jsx)(i.a,{children:Object(M.jsx)(fe,{})})})})}),document.getElementById("root"))},18:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return s}));var r=function(e){return e.auth.user.name},c=function(e){return e.auth.isLoggedIn},a=function(e){return e.auth.isFetchingCurrentUser},s=function(e){return e.auth.error}},21:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return b}));var r=n(2),c=n.n(r),a=n(5),s=n(8),o=n(17),i=n.n(o);i.a.defaults.baseURL="https://connections-api.herokuapp.com";var u=Object(s.c)("phonebook/fetchContacts",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,i.a.get("/contacts");case 4:return a=e.sent,s=a.data,e.abrupt("return",s);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",r(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),l=Object(s.c)("phonebook/addContact",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,i.a.post("/contacts",t);case 4:return a=e.sent,s=a.data,e.abrupt("return",s);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",r(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),b=Object(s.c)("phonebook/deleteContact",function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,i.a.delete("/contacts/".concat(t));case 4:if(a=e.sent,200!==a.status){e.next=10;break}return e.abrupt("return",t);case 10:throw new Error({message:"error"});case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",r(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n){return e.apply(this,arguments)}}())},29:function(e,t,n){e.exports={link:"Navigation_link__YyxB8",activeLink:"Navigation_activeLink__OgrPt"}},30:function(e,t,n){e.exports={link:"AuthNav_link__HsFlU",activeLink:"AuthNav_activeLink__3HbVg"}},33:function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return g}));var r=n(2),c=n.n(r),a=n(5),s=n(17),o=n.n(s),i=n(23),u=n(6);o.a.defaults.baseURL="https://connections-api.herokuapp.com";var l=function(e){o.a.defaults.headers.common.Authorization="Bearer ".concat(e)},b=function(){o.a.defaults.headers.common.Authorization=""},d=function(e){return function(){var t=Object(a.a)(c.a.mark((function t(n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(u.a.registerRequest()),t.prev=1,t.next=4,o.a.post("/users/signup",e);case 4:r=t.sent,a=r.data,l(a.token),n(u.a.registerSuccess(a)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),n(u.a.registerError(t.t0.message)),i.b.error(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(a.a)(c.a.mark((function t(n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(u.a.logInRequest()),t.prev=1,t.next=4,o.a.post("/users/login",e);case 4:r=t.sent,a=r.data,l(a.token),n(u.a.logInSuccess(a)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(1),n(u.a.logInError(t.t0.message)),i.b.error(t.t0.message);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},f=function(e){return function(){var e=Object(a.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(u.a.logoutRequest()),e.prev=1,e.next=4,o.a.post("/users/logout");case 4:b(),t(u.a.logoutSuccess()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(u.a.logoutError(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},g=function(){return function(){var e=Object(a.a)(c.a.mark((function e(t,n){var r,a,s,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(),a=r.auth.token){e.next=3;break}return e.abrupt("return");case 3:return l(a),t(u.a.getCurrentUserRequest()),e.prev=5,e.next=8,o.a.get("/users/current");case 8:s=e.sent,i=s.data,t(u.a.getCurrentUserSuccess(i)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),t(u.a.getCurrentUserError(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}()}},36:function(e,t,n){e.exports={container:"UserMenu_container__f3UoN",avatar:"UserMenu_avatar__3fZxw",name:"UserMenu_name__3AUlF"}},42:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r,c=n(3),a=n(8),s=n(21),o=Object(a.d)({name:"phoneBook",initialState:{contacts:[],isLoading:!1,filter:""},reducers:{changeFilter:function(e,t){e.filter=t.payload}},extraReducers:(r={},Object(c.a)(r,s.c.fulfilled,(function(e,t){var n=t.payload;e.contacts=n,e.isLoading=!1})),Object(c.a)(r,s.c.pending,(function(e){e.isLoading=!0})),Object(c.a)(r,s.c.rejected,(function(e){e.isLoading=!1})),Object(c.a)(r,s.a.pending,(function(e){e.isLoading=!0})),Object(c.a)(r,s.a.fulfilled,(function(e,t){var n=t.payload;e.contacts.push(n),e.isLoading=!1})),Object(c.a)(r,s.a.rejected,(function(e){e.isLoading=!1})),Object(c.a)(r,s.b.pending,(function(e){e.isLoading=!0})),Object(c.a)(r,s.b.fulfilled,(function(e,t){var n=t.payload;e.contacts=e.contacts.filter((function(e){return e.id!==n})),e.isLoading=!1})),Object(c.a)(r,s.b.rejected,(function(e){e.isLoading=!1})),r)});t.b=o.reducer;var i=o.actions.changeFilter},54:function(e,t,n){e.exports={header:"AppBar_header__1Yk8v"}},55:function(e,t,n){e.exports={container:"Container_container__3RIox"}},6:function(e,t,n){"use strict";var r=n(8),c={registerRequest:Object(r.b)("auth/registerRequest"),registerSuccess:Object(r.b)("auth/registerSuccess"),registerError:Object(r.b)("auth/registerError"),logInRequest:Object(r.b)("auth/logInRequest"),logInSuccess:Object(r.b)("auth/logInSuccess"),logInError:Object(r.b)("auth/logInError"),logoutRequest:Object(r.b)("auth/logoutRequest"),logoutSuccess:Object(r.b)("auth/logoutSuccess"),logoutError:Object(r.b)("auth/logoutError"),getCurrentUserRequest:Object(r.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(r.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(r.b)("auth/getCurrentUserError")};t.a=c}},[[113,5,6]]]);
//# sourceMappingURL=main.dad5d37a.chunk.js.map